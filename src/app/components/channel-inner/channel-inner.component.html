<app-navigation></app-navigation>
<section>
  <div class="container channel_inner outer_header" *ngIf="(tagState$ | async).channel_detail?.channelName && !pageLoading">
    <!---  section  -->
    <div class="row">
            <div class="col-md-6">
                <p *ngIf="!(tagState$ | async).channel_detail?.accessSeetings.access" class="c-text_sm text_uppercase ltr-space color-grey-dark">Public Channel</p>
                <p *ngIf="(tagState$ | async).channel_detail?.accessSeetings.access" class="c-text_sm text_uppercase ltr-space color-grey-dark">Private Channel</p>
                <ul class="list-inline">
                    <li class="list-inline-item">
                        <div class="c-h3 c-h3--weight">{{(tagState$ | async).channel_detail?.channelName}}</div>
                    </li>
                    <li class="list-inline-item" *ngIf="(tagState$ | async).channel_detail?.isOwner">
                        <button type="button" class="btn btn-default btn-sm" (click)="addPostBtnClick()" >
                            Add Post
                        </button>
                    </li>
                    <li class="list-inline-item" *ngIf="!(tagState$ | async).channel_detail?.isOwner">
                        <button type="button" (click)="followChannel(isfollowing, channel?.channel_detail?.channelId )" class="btn btn-primary btn-sm">{{ isfollowing ? 'Unfollow' : 'Follow' }}</button>
                    </li>
                    
                    <li class="list-inline-item" *ngIf="(tagState$ | async).channel_detail?.isOwner">
                        <div class="dropdown" appDropdown>
                            <span class="com-head" appDropdownOpen>
                                <a (click)="pinEditFormPopup()"  >
                                    <img class="opt-dot" src="/assets/img/svg/ico_options.svg">
                                </a>
                            </span>
                            <ul class="dropdown-menu c-opsdropdown--size1">
                                <!--<li class="list-inline-item">
                                    <a href="#">Pin to Quick Access</a>
                                </li>-->
                                <li class="list-inline-item">
                                    <a [routerLink]="['', { outlets: { media : ['channel', (tagState$ | async).channel_detail?.channelId, 'edit' ] } } ]" >Edit</a>
                                </li>
                            </ul>
                        </div>

                    </li>
                </ul>
                <div class=" spot_in_toptext c-text_md color-grey-dark m-t-16">
                    {{ (tagState$ | async).channel_detail?.description }}
                </div>
            </div>
            <div class="col-md-6">
                
                <div class="col-sm-12 spot_in_icons m-b-24">
                    <div class="overlap_thumb">
                        <span class="over1_thumb" *ngFor="let contributor of contributors">
                            <img *ngIf="contributor.profileImage" src="{{ imageLink + contributor.profileImage }}">
                            <img *ngIf="!contributor.profileImage" src="/assets/img/avatar.jpg">
                        </span>
                    </div>
                </div>
                <ul class="list-inline">
                    <li class="list-inline-item pull-right">
                        <div class="spot_in_follow c-text_sm text_uppercase ltr-space color-grey-dark"><span class="c-h3 c-h3--weight">{{ (tagState$ | async).channel_detail?.followersCount }}</span><br>Followers</div>
                        <div class="spot_in_follow c-text_sm text_uppercase ltr-space color-grey-dark"><span class="c-h3 c-h3--weight">{{ (tagState$ | async).channel_detail?.spotCount }}</span><br>Posts</div>
                    </li>
                </ul>
            </div>
        </div>
    

    <!-- follow channels -->
    <div class="row channel_inner_block">
      <div class="col-md-12 channe__media">
        <div class="row">
          <!--<div *ngIf="userMedia.user_posts_loading">
            <div class="msg__loading">
              <div class="loader">Loading...</div>
            </div>
          </div>-->
          <masonry [useImagesLoaded]="true">
            <masonry-brick class="col-md-3" *ngFor="let media of channel.channel_detail?.media; let i = index">
                <app-post-card  (postDelete)="deletePost(media)" (onClick)="mediaOpenPopup(media.id)" [mediaData]="media"></app-post-card>
            </masonry-brick>
          </masonry>
        </div>
      </div>
    </div>
  </div>
  <!--<div *ngIf="channel?.channel_detail" class="outer_header not_found" [ngClass]="!channel_loading ? '  not_found__add' : ''">
    <h2>Channel Not Found</h2>
  </div>-->
</section>

<div *ngIf="pageLoading === true">
  <div class="sticky">
    <div class="loader">Loading...</div>
  </div>
</div>
